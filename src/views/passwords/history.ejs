<link rel="stylesheet" href="./css/history.css">

<section id="history" class="dashboard-section">
  <h2>Lösenordshistorik</h2>
  <% if (history && history.length) { %>
    <ul class="history-timeline">
      <% 
        // Sortera så att nyast är först
        const sorted = history.slice().sort((a, b) => 
          new Date(b.changedAt) - new Date(a.changedAt)
        );
        sorted.forEach(item => { 
      %>
        <li class="timeline-item">
          <div class="item-badge"></div>
          <div class="item-content">
            <time datetime="<%= item.changedAt %>">
              <%= new Date(item.changedAt).toLocaleString('sv-SE', {
                    year:   'numeric',
                    month:  'long',
                    day:    'numeric',
                    hour:   '2-digit',
                    minute: '2-digit'
                  })
              %>
            </time>
            <span class="item-label">Ändrat lösenord</span>
          </div>
        </li>
      <% }); %>
    </ul>
  <% } else { %>
    <p class="no-history">Ingen historik att visa.</p>
  <% } %>
</section>




