<link rel="stylesheet" href="./css/sidebar.css">

<script type="module" src="./js/sidebar.js"></script>
<script type="module" src="./js/sidebarToggle.js"></script>
<script type="module" src="./js/logout.js"></script>

<aside class="sidebar">
  <h2><a href="./">ğŸ“˜ TimeLock</a></h2>
  <nav class="sidebar-nav">
    <% if (pageType === 'dashboard') { %>
      <button class="sidebar-btn <%= !isCodeVerified ? 'disabled' : '' %>" data-target="generator">
        ğŸ” Generera lÃ¶senord
      </button>
      <button class="sidebar-btn <%= !isCodeVerified ? 'disabled' : '' %>" data-target="sparade">
        ğŸ“‚ Sparade lÃ¶senord
      </button>
      <button class="sidebar-btn" data-target="instÃ¤llningar">
        âš™ï¸ InstÃ¤llningar
      </button>

    <% } else if (pageType === 'passwordDetail') { %>
      <a href="./dashboard" class="sidebar-btn">
        â† Tillbaka
      </a>
      <button class="sidebar-btn <%= !isCodeVerified ? 'disabled' : '' %>" data-target="showpassword">
        âœï¸ Vissa lÃ¶senord
      </button>
      <button class="sidebar-btn <%= !isCodeVerified ? 'disabled' : '' %>" data-target="change">
        âœï¸ Ã„ndra
      </button>
      <button type="button" id="show-history" class="sidebar-btn <%= !isCodeVerified ? 'disabled' : '' %>">
        ğŸ“‚ Historik
      </button>
      <form action="./passwords/<%= entry._id %>/delete" method="POST">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
        <button type="submit" class="sidebar-btn btn-danger">
          ğŸ—‘ï¸ Ta bort
        </button>
      </form>
    <% } %>
  </nav>
  <div class="sidebar-footer">
    <div class="user-info">
      <div class="avatar">ğŸ‘¤</div>
      <div class="user-details">
        <span class="user-name"><%= user?.name %></span>
        <% if (isCodeVerified) { %>
          <span class="verified-status">âœ” Verifierad</span>
        <% } else { %>
          <span class="unverified-status">â›” Ej verifierad</span>
        <% } %>
        <form id="logout-form" method="POST" action="./logout">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <button type="submit" class="btn-logout">Logga ut</button>
        </form>
      </div>
    </div>
  </div>
</aside>
